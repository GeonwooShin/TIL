# **redux**

일반적으로 `redux + react`를 많이 쓰게되면서, 리덕스를 리액트 상태관리 라이브러리로 알고 있지만, 리덕스는 자바스크립트 상태관리 라이브러리이다.

하지만 나는 리액트에서 사용하는 `redux`를 전제로 설명을 시작하겠다.

그렇다면 일단 `redux`는 무엇을 위해 사용하는 것일까?

이 질문에 답하기 위해서는 우선적으로 `상태(state)`에 대해서 먼저 살펴보는 것이 좋겠다.

상태(state)라는 것은 쉽게 말해서 **컴포넌트 안에서 관리되는 데이터**를 뜻한다.

예를 한 번 들어보자. (함수형 컴포넌트)

```jsx
import React, { useState } from "react";

function App() {
  const [value, setValue] = useState(0);
  return <div>{value}</div>;
}
```

이제 위의 예시에서 함수형 컴포넌트 내부에서 상태(state)를 관리할 수 있게 되었다.

이 때, 어느 다른 컴포넌트에서 위의 해당 데이터를 필요로 한다면 어떻게 될까?

`react`는 `SPA`을 기반으로 하기 때문에 수 많은 컴포넌트가 존재할 것이고, 어느 한 컴포넌트에서 관리하는 데이터를 다른 컴포넌트에서 조작하기 위해서는 `props`로 해당 `상태(state)`를 전달받아야 하기 때문에 굉장히 복잡해질 것이다.

이러한 문제점을 해결하기 위해서 사용하는 것이 바로 `redux`이다. 또한 리덕스를 통해 상태를 안정적으로 관리하기 위해서는 다음과 같은 규칙을 따라야 한다.

### **리덕스 규칙**

1. **단일 스토어 사용을 권장한다.**

- 애플리케이션의 디버깅을 원활하게 하고, 쉽게 클라이언트에서 데이터를 받아들일수 있도록 하나의 애플리케이션 안에서는 하나의 스토어만 사용한다.

2. **상태는 읽기 전용이어야 한다.**

- 상태를 변화 시키는 방법은 무조건 액션 단 하나만이 이용된다. 이를 통해 상태 변경에 대한 추적이 용이해진다.

3. **리듀서는 순수함수여야 한다.**

- redux는 `state` 객체의 주소를 비교하여 `state`의 변경을 감지한다. 변경 전 `state`와 변경 후 `state`를 비교할 수 있도록 기존 상태의 `state`를 변경하는 것이 아니라, 새로운 `state`를 만들어서 교체해야 한다. 기존 상태의 `state`를 변경한다면 `state` 객체의 주소는 동일하기 때문에 변경이 감지되지 않아 `state`가 변경되었다고 판단하지 않는다.

---

### **리덕스 개념**

![리덕스 흐름](https://kyun2da.dev/c98922b5a476e12b853576324f12f5c4/redux-data-flow.gif)

위의 그림은 리덕스의 흐름도인데, 기본적으로 리덕스의 개념은 다음과 같다.

1. 유저가 버튼을 클릭한다.
2. 버튼에 연결된 디스패치를 실행해 액션을 일으킨다.
3. 스토어는 이전 상태와 현재 액션으로 리듀서 함수를 실행하고, 그 리턴 값을 새로운 상태로 저장한다.
4. 스토어는 스토어를 구독하고 있던 UI들에게 업데이트 사실을 알려준다.
5. 스토어의 데이터가 필요한 각각의 UI들은 데이터가 업데이트 되었는지 확인한다.
6. 데이터가 변경된 요소는 새 데이터로 강제로 리렌더링 된다.

이제 리덕스에 대해서 구체적으로 알아보도록 하자.

---

### **라이브러리 설치**

```
$ npm i redux
$ npm i react-redux
```

리덕스를 사용하기에는 `redux`만 설치해도 충분하지만, 리액트에서 리덕스를 사용하기 위해서는 `react-redux`도 설치해주어야 한다.

---

### **리덕스 용어**
